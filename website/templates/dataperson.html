
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ข้อมูลผู้ใช้</title>
    <link rel="stylesheet" href="./static/dataperson.css">
</head>
<body>
    <div class="container">
        <div class="profile-header">
            <img src="./img/porson.jpg" alt="Profile">
            <div>
                <h2><strong>ชื่อ:</strong> <span id="name"></span></h2>
                <p>ห้อง</strong> <span id="room"></span></p>
            </div>
        </div>
        <div class="incon">
            <div class="info-section">
                <div class="personal-info">
                    <h3>ข้อมูลส่วนตัว</h3>
                    <p><strong>ชื่อ:</strong> <span id="name"></span></p>
                    <p><strong>ชื่อเล่น:</strong> <span id="nickname"></span></p>
                    <p><strong>วันเกิด:</strong> <span id="birthdate"></span></p>
                    <p><strong>อายุ:</strong> <span id="age"></span></p>
                    <p><strong>เพศ:</strong> <span id="gender"></span></p>
                    <p><strong>สัญชาติ:</strong> <span id="nationality"></span></p>
                    <p><strong>ศาสนา:</strong> <span id="religion"></span></p>
                    <p><strong>เชื้อชาติ:</strong> <span id="ethnicity"></span></p>
                </div>
                <div class="history">
                    <h3>ประวัติการจอง</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ประเภท</th>
                                <th>วันที่จอง</th>
                                <th>เวลาเริ่ม</th>
                                <th>เวลาจบ</th>
                                <th>หมายเหตุ</th>
                            </tr>
                        </thead>
                        <tbody id="booking-history"></tbody>
                    </table>
                </div>
            </div>

            
            <div class="add_payment">
                
                <div class="contact-info">
                    <h3>ข้อมูลติดต่อ</h3>
                    <p><strong>ที่อยู่:</strong> <span id="address"></span></p>
                    <p><strong>เบอร์โทร:</strong> <span id="phone"></span></p>
                    <p><strong>Line ID:</strong> <span id="line-id"></span></p>
                    <p><strong>E-mail:</strong> <span id="email"></span></p>
                </div>
                <div class="payment">
                    <div class="pays">
                        <h3><strong>ค่าใช้จ่าย</strong></h3>
                        <p class="amount" id="payment-amount"></p>
                        <p id="payment-deadline"></p>
                    </div>
                    <button class="btn" id="btn" type="button" onclick="senddata()"><strong>ส่งหลักฐานการโอน</strong></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch("/api/user")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("full-name").textContent = `${data.name} (${data.nickname})`;
                    document.getElementById("room-number").textContent = `ห้อง ${data.room}`;
                    document.getElementById("name").textContent = data.name;
                    document.getElementById("nickname").textContent = data.nickname;
                    document.getElementById("birthdate").textContent = data.birthdate;
                    document.getElementById("age").textContent = data.age;
                    document.getElementById("gender").textContent = data.gender;
                    document.getElementById("nationality").textContent = data.nationality;
                    document.getElementById("religion").textContent = data.religion;
                    document.getElementById("ethnicity").textContent = data.ethnicity;
                    document.getElementById("address").textContent = data.address;
                    document.getElementById("phone").textContent = data.phone;
                    document.getElementById("line-id").textContent = data.lineID;
                    document.getElementById("email").textContent = data.email;
                    document.getElementById("payment-amount").textContent = `${data.paymentAmount} บาท`;
                    document.getElementById("payment-deadline").textContent = `ชำระภายในวันที่ ${data.paymentDeadline}`;
                    
                    const bookingTable = document.getElementById("booking-history");
                    data.bookings.forEach(booking => {
                        let row = `<tr>
                            <td>${booking.type}</td>
                            <td>${booking.date}</td>
                            <td>${booking.startTime}</td>
                            <td>${booking.endTime}</td>
                            <td>${booking.note || '-'}</td>
                        </tr>`;
                        bookingTable.innerHTML += row;
                    });
                });
        });
    </script>
</body>
</html>
